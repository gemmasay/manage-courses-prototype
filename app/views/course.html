{% extends "layout.html" %}
{% set title %}{{ course.name | safe }} ({{ course.programmeCode }}){% endset %}
{% block page_title %}{{ title }}{% endblock %}

{% block content %}

<main id="content" role="main">
  {% include "includes/phase_banner_beta.html" %}
  <div class="breadcrumbs">
    {% if data['multi-organisation'] %}
      <ol>
        <li><a href="/">Organisations</a></li>
        <li><a href="/courses">{{ data['training-provider-name']}}</a></li>
      </ol>
    {% else %}
      <ol>
        <li><a href="/">{{ data['training-provider-name']}}</a></li>
      </ol>
    {% endif %}
  </div>

  {% if showMessage %}
    <div class="success-summary" role="alert" aria-labelledby="success-summary-heading-example-1" tabindex="-1">
      <h3 class="heading-medium success-summary-heading" id="success-summary-heading-example-1">
        Changes saved
      </h3>
    </div>
  {% endif %}

  {% if data[subject.slug + '-' + accrediting.slug + '-qa'] == 'true' %}
    <div class="success-summary" role="alert" aria-labelledby="success-summary-heading-example-1" tabindex="-1" style="margin-bottom: 60px">
      <h3 class="heading-medium success-summary-heading" id="success-summary-heading-example-1">
        {{ title }} has been sent to DfE for review
      </h3>
      <p>
        You will receive an email when the course is published or if changes are needed.
      </p>
    </div>
  {% endif %}

  <h1 class="heading-xlarge">
    <span class="heading-secondary">{{ course.options }}</span>
    {{ title }}
  </h1>

  {% if not data[course.programmeCode + '-template-choice'] %}
    <div class="add-double-bottom-margin status-box">

      {% if data['templates'].length == 0 %}
      <h2 class="heading-large remove-top-margin">Create a course template</h2>
      <p>You can copy the same information to different course profiles by creating a template. This means you won’t have to add this information individually for each course.</p>
      <p>For example, you can create a template for all your QTS salaried courses and another for your PGCE with QTS courses.</p>

      <p>
        <a href="/template/new" class="button">Create your first template</a>
      </p>
      <hr />
      <a href="/course/{{ accrediting.slug }}/{{ course.programmeCode }}/no-template">Don’t use a template</a>
      {% else %}
      <h2 class="heading-large remove-top-margin">Pick a course template</h2>
      {% include "course/_pick-template-choices.html" %}
      {% endif %}
    </div>
  {% elseif data[course.programmeCode + '-template-choice'] == 'template-none'  %}
    <!-- <div class="add-double-bottom-margin" style="border: 5px solid #ddd; padding: 20px">
      <p class="lede">This course does not use a template.</p>

      <ul class="list">
        <li><a href="#">Preview course</a></li>
        <li><a href="#">Switch to a template</a></li>
      </ul>

      <hr />

      <p>Before this course can be published DfE must approve it.</p>
      <a href="#" class="button">Submit for approval</a>
    </div> -->
  {% else %}
    <div class="add-double-bottom-margin status-box">
      <p class="lede">This course uses a template:<br /><a href="/template/{{ template.slug }}">{{ template.name }}</a></p>

      <p class="add-double-bottom-margin"><a href="/preview/{{ accrediting.slug }}/{{ course.programmeCode }}" class="button">Preview course</a></p>

      <ul class="list remove-bottom-margin">
        <li>
          <a href="/course/{{ accrediting.slug }}/{{ course.programmeCode }}/pick-template">Use a different template</a>
        </li>
      </ul>
    </div>
  {% endif %}

  <dl class="aligned add-top-margin">
    <dt>Training provider code:</dt>
    <dd>{{ course.providerCode }}</dd>
    <dt>Training programme code:</dt>
    <dd>{{ course.programmeCode }}</dd>
    <dt>Accrediting provider:</dt>
    <dd>{{ course.accrediting }}</dd>
    <dt>Route:</dt>
    <dd>{{ course.route }}</dd>
    <dt>Subjects:</dt>
    <dd>{{ course.subjects }}</dd>
    <dt>Age range:</dt>
    <dd>{{ course.ageRange }}</dd>
    <dt>Qualification:</dt>
    <dd>{{ course.qualifications }}</dd>
    <dt>Regions:</dt>
    <dd>{{ course.regions }}</dd>
  </dl>

  {% if data[course.programmeCode + '-template-choice'] == 'template-none'  %}
  <div class="grid-row add-top-margin">
    <div class="column-two-thirds">
      <div class="course-parts course-parts--large">
        <ul class="course-parts-items">
          <li class="course-parts-item">
            <h3 class="course-part-task">About this course</h3>

            <a class="course-part-task-action" href="/course/{{ accrediting.slug }}/{{ course.programmeCode }}/about-this-course">Edit</a>
            <dl class="course-part-tasks">
              {{ macros.coursePart(course.programmeCode + '-about-this-course', 'About this course') }}
              {{ macros.coursePart(course.programmeCode + '-interview-process', 'Interview process (optional)') }}
              {{ macros.coursePart(course.programmeCode + '-placement-school-policy', 'How school placements work') }}
            </dl>
          </li>
          <li class="course-parts-item">
            <h3 class="course-part-task">Course length and fees</h3>
            <a class="course-part-task-action" href="/course/{{ accrediting.slug }}/{{ course.programmeCode }}/fees-and-length">Edit</a>
            <dl class="course-part-tasks">
              {{ macros.coursePart(course.programmeCode + '-duration', 'Course length') }}
              {{ macros.coursePart(course.programmeCode + '-fee', 'Fee for UK and EU students') }}
              {{ macros.coursePart(course.programmeCode + '-fee-international', 'Fee for international students (optional)') }}
            </dl>
          </li>
          <li class="course-parts-item">
            <h3 class="course-part-task">
              Requirements and eligbility
            </h3>
            <a class="course-part-task-action" href="/course/{{ accrediting.slug }}/{{ course.programmeCode }}/requirements">Edit</a>

            <dl class="course-part-tasks">
              {{ macros.coursePart(course.programmeCode + '-qualifications-required', 'Qualifications needed') }}
              {{ macros.coursePart(course.programmeCode + '-personal-qualities', 'Personal qualities (optional)') }}
              {{ macros.coursePart(course.programmeCode + '-other-requirements', 'Other requirements (optional)') }}
            </dl>
          </li>
        </ul>
      </div>
    </div>
    <div class="column-one-third">
      <div class="add-double-bottom-margin status-box">
        <p class="lede">This course does not use a template.</p>

        <ul class="list">
          <li><a href="/preview/{{ accrediting.slug }}/{{ course.programmeCode }}">Preview course</a></li>
          <li><a href="/course/{{ accrediting.slug }}/{{ course.programmeCode }}/pick-template">Switch to a template</a></li>
        </ul>

        <hr />

        <p>Before this course can be published DfE must approve it.</p>
        <a href="#" class="button">Submit for approval</a>
      </div>
    </div>
  </div>
  {% endif %}

  <h3 class="heading-medium">Training locations</h3>
  <table>
    <thead>
      <tr>
        <th>Location name</th>
        <th>Address</th>
        <th>Code</th>
        <th>Full time vacancies</th>
        <th>Part time vacancies</th>
        <th>Applications accepted from</th>
      </tr>
    </thead>
    <tbody>
      {% for school in course.schools %}
      <tr>
        <td>{{ school.name }}</td>
        <td>{{ school.address }}</td>
        <td>{{ school.code }}</td>
        <td>Vacancies</td>
        <td>Not applicable</td>
        <td>26 Oct 2018</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</main>

{% endblock %}
